# ğŸ”§ SweetsShipStrike æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## ç›®æ¬¡

1. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦)
2. [æŠ€è¡“é¸å®šç†ç”±](#æŠ€è¡“é¸å®šç†ç”±)
3. [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ](#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ )
4. [ä¸»è¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«](#ä¸»è¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«)
5. [çŠ¶æ…‹ç®¡ç†](#çŠ¶æ…‹ç®¡ç†)
6. [P2Pé€šä¿¡](#p2pé€šä¿¡)
7. [ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯](#ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯)
8. [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–](#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–)
9. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)
10. [ä»Šå¾Œã®æ‹¡å¼µ](#ä»Šå¾Œã®æ‹¡å¼µ)

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Browser                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         Next.js 15 (App Router)            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚   Pages    â”‚  â”‚    Components       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  (React)   â”‚â†â†’â”‚  (UI/Game/Effects)  â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚         â†•                    â†•              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚   Zustand  â”‚  â”‚   Business Logic    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   (State)  â”‚â†â†’â”‚ (Game/AI/Reward)    â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                          â†•                  â”‚ â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚  â”‚              â”‚  PeerJS Client   â”‚          â”‚ â”‚
â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ WebRTC (P2P)
                         â†“
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚   PeerJS Server  â”‚
               â”‚  (Render.com)    â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Presentation Layer (Pages/Components) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Application Layer (Hooks/Store)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Domain Layer (Game Logic/AI/Reward)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Infrastructure Layer (P2P/Storage)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æŠ€è¡“é¸å®šç†ç”±

### Next.js 15
- **App Router**: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ç›´æ„Ÿçš„
- **React Server Components**: åˆæœŸãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®é«˜é€ŸåŒ–
- **TypeScriptçµ±åˆ**: å‹å®‰å…¨ãªé–‹ç™ºç’°å¢ƒ
- **Vercelãƒ‡ãƒ—ãƒ­ã‚¤**: ç°¡å˜ãªãƒ‡ãƒ—ãƒ­ã‚¤ã¨ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°

### TypeScript 5.6
- **å‹å®‰å…¨æ€§**: ãƒã‚°ã®æ—©æœŸç™ºè¦‹
- **IntelliSense**: é–‹ç™ºåŠ¹ç‡ã®å‘ä¸Š
- **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**: å®‰å…¨ãªã‚³ãƒ¼ãƒ‰å¤‰æ›´
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: å‹ãŒè‡ªå·±ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–

### Tailwind CSS 4.0
- **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**: é«˜é€ŸãªUIé–‹ç™º
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆè¨­è¨ˆ
- **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**: æŸ”è»Ÿãªãƒ†ãƒ¼ãƒè¨­å®š
- **ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º**: æœªä½¿ç”¨CSSã®è‡ªå‹•å‰Šé™¤

### Framer Motion 11.0
- **å®£è¨€çš„API**: Reactã¨ã®è¦ªå’Œæ€§
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: GPUåŠ é€Ÿã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**: è‡ªå‹•ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨ˆç®—
- **ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼**: ã‚¿ãƒƒãƒ/ãƒ‰ãƒ©ãƒƒã‚°å¯¾å¿œ

### Zustand 5.0
- **ã‚·ãƒ³ãƒ—ãƒ«**: æœ€å°é™ã®ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆ
- **è»½é‡**: 1KBæœªæº€ã®ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º
- **æŸ”è»Ÿ**: ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢å¯¾å¿œ
- **TypeScript**: å®Œå…¨ãªå‹ã‚µãƒãƒ¼ãƒˆ

### PeerJS 1.5
- **WebRTC**: ãƒ–ãƒ©ã‚¦ã‚¶é–“P2Pé€šä¿¡
- **ç°¡å˜API**: WebRTCã®è¤‡é›‘ã•ã‚’éš è”½
- **ãƒ‡ãƒ¼ã‚¿ãƒãƒ£ãƒãƒ«**: ä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·é€šä¿¡
- **ã‚·ã‚°ãƒŠãƒªãƒ³ã‚°**: ã‚«ã‚¹ã‚¿ãƒ ã‚µãƒ¼ãƒãƒ¼å¯¾å¿œ

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
src/
â”œâ”€â”€ app/                           # Next.js App Router
â”‚   â”œâ”€â”€ page.tsx                  # ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢
â”‚   â”œâ”€â”€ mode-select/              # ãƒ¢ãƒ¼ãƒ‰é¸æŠ
â”‚   â”œâ”€â”€ character-select/         # ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é¸æŠ
â”‚   â”œâ”€â”€ cpu-difficulty/           # CPUé›£æ˜“åº¦é¸æŠ
â”‚   â”œâ”€â”€ online-lobby/             # ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ­ãƒ“ãƒ¼
â”‚   â”œâ”€â”€ ship-placement/           # é…ç½®ç”»é¢
â”‚   â”œâ”€â”€ game/                     # ã‚²ãƒ¼ãƒ ç”»é¢
â”‚   â”œâ”€â”€ result/                   # çµæœç”»é¢
â”‚   â”œâ”€â”€ shop/                     # ã‚·ãƒ§ãƒƒãƒ—
â”‚   â”œâ”€â”€ profile/                  # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ help/                     # ãƒ˜ãƒ«ãƒ—
â”‚   â”œâ”€â”€ layout.tsx                # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â””â”€â”€ globals.css               # ã‚°ãƒ­ãƒ¼ãƒãƒ«CSS
â”‚
â”œâ”€â”€ components/                    # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ui/                       # æ±ç”¨UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ Button.tsx           # ãƒœã‚¿ãƒ³
â”‚   â”‚   â”œâ”€â”€ Modal.tsx            # ãƒ¢ãƒ¼ãƒ€ãƒ«
â”‚   â”‚   â”œâ”€â”€ Loading.tsx          # ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
â”‚   â”‚   â”œâ”€â”€ Notification.tsx     # é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”‚   â”œâ”€â”€ PageTransition.tsx   # ãƒšãƒ¼ã‚¸é·ç§»
â”‚   â”‚   â”œâ”€â”€ SettingsModal.tsx    # è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«
â”‚   â”‚   â””â”€â”€ OrientationGuide.tsx # æ¨ªå‘ãæ¡ˆå†…
â”‚   â”‚
â”‚   â”œâ”€â”€ game/                     # ã‚²ãƒ¼ãƒ å°‚ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ Board.tsx            # ã‚²ãƒ¼ãƒ ãƒœãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ Cell.tsx             # ãƒã‚¹
â”‚   â”‚   â”œâ”€â”€ Ship.tsx             # ä¹—ã‚Šç‰©
â”‚   â”‚   â”œâ”€â”€ HUD.tsx              # ãƒ˜ãƒƒãƒ‰ã‚¢ãƒƒãƒ—ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤
â”‚   â”‚   â”œâ”€â”€ TurnIndicator.tsx   # ã‚¿ãƒ¼ãƒ³è¡¨ç¤º
â”‚   â”‚   â”œâ”€â”€ SkillPanel.tsx       # ã‚¹ã‚­ãƒ«ãƒ‘ãƒãƒ«
â”‚   â”‚   â”œâ”€â”€ SkillModal.tsx       # ã‚¹ã‚­ãƒ«ãƒ¢ãƒ¼ãƒ€ãƒ«
â”‚   â”‚   â”œâ”€â”€ PauseMenu.tsx        # ãƒãƒ¼ã‚ºãƒ¡ãƒ‹ãƒ¥ãƒ¼
â”‚   â”‚   â””â”€â”€ HPBar.tsx            # HPãƒãƒ¼
â”‚   â”‚
â”‚   â”œâ”€â”€ effects/                  # ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ HitEffect.tsx        # ãƒ’ãƒƒãƒˆã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”œâ”€â”€ MissEffect.tsx       # ãƒŸã‚¹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”œâ”€â”€ SinkEffect.tsx       # æ’ƒæ²ˆã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”œâ”€â”€ ShieldEffect.tsx     # ã‚·ãƒ¼ãƒ«ãƒ‰ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”œâ”€â”€ BombEffect.tsx       # ãƒœãƒ ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â””â”€â”€ ScanEffect.tsx       # ã‚¹ã‚­ãƒ£ãƒ³ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ character/                # ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é–¢é€£
â”‚   â”‚   â””â”€â”€ CharacterPortrait.tsx # ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç«‹ã¡çµµ
â”‚   â”‚
â”‚   â””â”€â”€ reward/                   # å ±é…¬ã‚·ã‚¹ãƒ†ãƒ UI
â”‚       â”œâ”€â”€ CoinRewardDisplay.tsx # ã‚³ã‚¤ãƒ³å ±é…¬è¡¨ç¤º
â”‚       â”œâ”€â”€ TitleUnlockModal.tsx  # ç§°å·è§£æ”¾ãƒ¢ãƒ¼ãƒ€ãƒ«
â”‚       â”œâ”€â”€ ShopItem.tsx          # ã‚·ãƒ§ãƒƒãƒ—ã‚¢ã‚¤ãƒ†ãƒ 
â”‚       â”œâ”€â”€ StatsDisplay.tsx      # çµ±è¨ˆè¡¨ç¤º
â”‚       â””â”€â”€ TitleBadge.tsx        # ç§°å·ãƒãƒƒã‚¸
â”‚
â”œâ”€â”€ lib/                           # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ game/                     # ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ board.ts             # ãƒœãƒ¼ãƒ‰ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ gameLogic.ts         # ã‚²ãƒ¼ãƒ é€²è¡Œ
â”‚   â”‚   â”œâ”€â”€ validation.ts        # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”œâ”€â”€ ships.ts             # ä¹—ã‚Šç‰©å®šç¾©
â”‚   â”‚   â”œâ”€â”€ characters.ts        # ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å®šç¾©
â”‚   â”‚   â”œâ”€â”€ skills.ts            # ã‚¹ã‚­ãƒ«å®šç¾©
â”‚   â”‚   â””â”€â”€ skillEffects.ts      # ã‚¹ã‚­ãƒ«å®Ÿè¡Œ
â”‚   â”‚
â”‚   â”œâ”€â”€ ai/                       # CPU AI
â”‚   â”‚   â””â”€â”€ cpuAI.ts             # CPUæ€è€ƒãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚
â”‚   â”œâ”€â”€ p2p/                      # P2Pé€šä¿¡
â”‚   â”‚   â””â”€â”€ peerManager.ts       # Peeræ¥ç¶šç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ reward/                   # å ±é…¬ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”‚   â”œâ”€â”€ coinCalculator.ts   # ã‚³ã‚¤ãƒ³è¨ˆç®—
â”‚   â”‚   â”œâ”€â”€ titleManager.ts     # ç§°å·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ shopManager.ts      # ã‚·ãƒ§ãƒƒãƒ—ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ statsManager.ts     # çµ±è¨ˆç®¡ç†
â”‚   â”‚   â””â”€â”€ definitions/        # å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚       â”œâ”€â”€ titles.ts       # ç§°å·å®šç¾©
â”‚   â”‚       â””â”€â”€ skins.ts        # ã‚¹ã‚­ãƒ³å®šç¾©
â”‚   â”‚
â”‚   â”œâ”€â”€ sound/                    # ã‚µã‚¦ãƒ³ãƒ‰ç®¡ç†
â”‚   â”‚   â””â”€â”€ soundManager.ts      # Howler.jsçµ±åˆ
â”‚   â”‚
â”‚   â””â”€â”€ utils/                    # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚       â””â”€â”€ constants.ts         # å®šæ•°å®šç¾©
â”‚
â”œâ”€â”€ store/                         # ZustandçŠ¶æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ gameStore.ts              # ã‚²ãƒ¼ãƒ çŠ¶æ…‹
â”‚   â”œâ”€â”€ uiStore.ts                # UIçŠ¶æ…‹
â”‚   â””â”€â”€ p2pStore.ts               # P2PçŠ¶æ…‹
â”‚
â””â”€â”€ types/                         # TypeScriptå‹å®šç¾©
    â”œâ”€â”€ game.ts                   # ã‚²ãƒ¼ãƒ å‹
    â”œâ”€â”€ p2p.ts                    # P2På‹
    â””â”€â”€ ui.ts                     # UIå‹
```

---

## ä¸»è¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

### ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆlib/game/ï¼‰

#### board.ts
```typescript
// ãƒœãƒ¼ãƒ‰ç®¡ç†ã®ä¸»è¦é–¢æ•°
export function createEmptyBoard(): Board
export function canPlaceShip(board, ship, position, direction): boolean
export function placeShip(board, ship, position, direction): Board
export function clearShipFromBoard(board, shipId): Board
```

#### gameLogic.ts
```typescript
// ã‚²ãƒ¼ãƒ é€²è¡Œã®ä¸»è¦é–¢æ•°
export function initializeGame(players, mode): GameState
export function executeAttack(gameState, targetPosition): AttackResult
export function checkGameEnd(gameState): boolean
export function processTurn(gameState, action): GameState
```

#### skillEffects.ts
```typescript
// ã‚¹ã‚­ãƒ«å®Ÿè¡Œã®ä¸»è¦é–¢æ•°
export function executeSkill(skillType, gameState, data): SkillResult
export function executeStrawberryShield(gameState, playerId): SkillResult
export function executeChocolateBomb(gameState, position): SkillResult
export function executeSweetEscape(gameState, shipId, position): SkillResult
export function executeWaffleScan(gameState, position): SkillResult
```

### AIï¼ˆlib/ai/ï¼‰

#### cpuAI.ts
```typescript
export interface CPUDifficulty {
  name: string;
  attackStrategy: (gameState: GameState) => Position;
}

// 3æ®µéšã®é›£æ˜“åº¦å®Ÿè£…
export const CPU_DIFFICULTIES = {
  easy: easyAI,      // ãƒ©ãƒ³ãƒ€ãƒ æ”»æ’ƒ
  normal: normalAI,  // ãƒ’ãƒƒãƒˆå¾Œå‘¨è¾ºæ¢ç´¢
  hard: hardAI       // æˆ¦ç•¥çš„æ”»æ’ƒ
};
```

### P2Pé€šä¿¡ï¼ˆlib/p2p/ï¼‰

#### peerManager.ts
```typescript
export class PeerManager {
  async createRoom(): Promise<string>           // ãƒ«ãƒ¼ãƒ ä½œæˆ
  async joinRoom(roomId: string): Promise<void> // ãƒ«ãƒ¼ãƒ å‚åŠ 
  sendAction(action: GameAction): void          // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³é€ä¿¡
  onReceiveAction(callback): void               // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å—ä¿¡
  disconnect(): void                             // åˆ‡æ–­
}
```

### å ±é…¬ã‚·ã‚¹ãƒ†ãƒ ï¼ˆlib/reward/ï¼‰

#### coinCalculator.ts
```typescript
export interface CoinReward {
  baseAmount: number;
  bonuses: Bonus[];
  totalAmount: number;
}

export function calculateCoinReward(
  result: GameResult,
  gameState: GameState,
  mode: GameMode
): CoinReward
```

#### titleManager.ts
```typescript
export function checkTitleUnlocks(): Title[]
export function unlockTitle(titleId: string): boolean
export function equipTitle(titleId: string): void
export function getEquippedTitle(): Title | null
```

---

## çŠ¶æ…‹ç®¡ç†

### Zustand Storeæ§‹é€ 

#### gameStore.ts
```typescript
interface GameStore {
  // çŠ¶æ…‹
  gameState: GameState | null;
  localPlayerId: string | null;
  mode: GameMode | null;

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  initializeGame: (players, mode) => void;
  attack: (position) => void;
  useSkill: (skillType, data) => void;
  endTurn: () => void;

  // è¨ˆç®—æ¸ˆã¿å€¤
  isMyTurn: () => boolean;
  canAttack: (position) => boolean;
}
```

#### uiStore.ts
```typescript
interface UIStore {
  // çŠ¶æ…‹
  notifications: Notification[];
  selectedShip: ShipType | null;
  isLoading: boolean;

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  addNotification: (notification) => void;
  removeNotification: (id) => void;
  selectShip: (shipType) => void;
  setLoading: (loading) => void;
}
```

#### p2pStore.ts
```typescript
interface P2PStore {
  // çŠ¶æ…‹
  peerId: string | null;
  connectedPeer: string | null;
  connectionStatus: ConnectionStatus;

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  createRoom: () => Promise<string>;
  joinRoom: (roomId) => Promise<void>;
  sendMessage: (message) => void;
  disconnect: () => void;
}
```

---

## P2Pé€šä¿¡

### WebRTCæ¥ç¶šãƒ•ãƒ­ãƒ¼

```
Host                          Guest
  â”‚                             â”‚
  â”œâ”€ createRoom()              â”‚
  â”œâ”€ PeerServer connection     â”‚
  â”œâ”€ Get Room ID               â”‚
  â”œâ”€ Share Room ID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                             â”œâ”€ joinRoom(id)
  â”‚                             â”œâ”€ PeerServer connection
  â”œâ”€ Accept connection  â—„â”€â”€â”€â”€â”€â”€â”¤
  â”œâ”€ Establish DataChannel â”€â”€â”€â”€â”¤
  â”‚                             â”‚
  â”œâ”€ Send GameAction â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Send GameAction
  â”‚                             â”‚
```

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼

```typescript
interface P2PMessage {
  type: 'game-action' | 'chat' | 'sync' | 'disconnect';
  payload: any;
  timestamp: number;
}

interface GameActionMessage extends P2PMessage {
  type: 'game-action';
  payload: {
    action: 'attack' | 'skill' | 'endTurn';
    data: any;
  };
}
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```typescript
// æ¥ç¶šã‚¨ãƒ©ãƒ¼
peer.on('error', (error) => {
  if (error.type === 'peer-unavailable') {
    // ãƒ«ãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚‰ãªã„
  } else if (error.type === 'network') {
    // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼
  }
});

// åˆ‡æ–­å‡¦ç†
connection.on('close', () => {
  // ç›¸æ‰‹ãŒåˆ‡æ–­ã—ãŸ
  showDisconnectModal();
});
```

---

## ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯

### ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã®å‹å®šç¾©

```typescript
interface GameState {
  players: {
    [playerId: string]: PlayerState;
  };
  currentTurn: string;
  turnCount: number;
  phase: 'setup' | 'battle' | 'end';
  winner: string | null;
}

interface PlayerState {
  playerId: string;
  board: Board;
  ships: Ship[];
  skills: SkillState[];
  hp: number;
}

type Board = CellState[][];  // 10x10

interface CellState {
  attacked: boolean;
  shipId: string | null;
  hitIndex: number | null;
}
```

### æ”»æ’ƒå‡¦ç†ãƒ•ãƒ­ãƒ¼

```
1. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
   â”œâ”€ è‡ªåˆ†ã®ã‚¿ãƒ¼ãƒ³ã‹
   â”œâ”€ æ”»æ’ƒæ¸ˆã¿ã§ãªã„ã‹
   â””â”€ æœ‰åŠ¹ãªä½ç½®ã‹

2. æ”»æ’ƒå®Ÿè¡Œ
   â”œâ”€ ã‚»ãƒ«çŠ¶æ…‹æ›´æ–°
   â”œâ”€ åˆ¤å®šï¼ˆmiss/hit/sunkï¼‰
   â””â”€ HPè¨ˆç®—

3. çµæœå‡¦ç†
   â”œâ”€ ã‚¨ãƒ•ã‚§ã‚¯ãƒˆè¡¨ç¤º
   â”œâ”€ é€£ç¶šæ”»æ’ƒåˆ¤å®š
   â””â”€ å‹æ•—åˆ¤å®š

4. ã‚¿ãƒ¼ãƒ³ç®¡ç†
   â”œâ”€ ãƒ’ãƒƒãƒˆæ™‚ï¼šç¶™ç¶š
   â”œâ”€ ãƒŸã‚¹æ™‚ï¼šäº¤ä»£
   â””â”€ æ’ƒæ²ˆæ™‚ï¼šç¶™ç¶š
```

### ã‚¹ã‚­ãƒ«å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

```
1. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
   â”œâ”€ ã‚¹ã‚­ãƒ«ä½¿ç”¨å¯èƒ½ã‹
   â”œâ”€ å¯¾å¿œä¹—ã‚Šç‰©ãŒç”Ÿå­˜ã‹
   â””â”€ ä½¿ç”¨æ¸ˆã¿ã§ãªã„ã‹

2. ã‚¹ã‚­ãƒ«å®Ÿè¡Œ
   â”œâ”€ ã‚¿ã‚¤ãƒ—åˆ¥å‡¦ç†
   â”œâ”€ ã‚²ãƒ¼ãƒ çŠ¶æ…‹æ›´æ–°
   â””â”€ ã‚¨ãƒ•ã‚§ã‚¯ãƒˆè¡¨ç¤º

3. çŠ¶æ…‹æ›´æ–°
   â”œâ”€ ä½¿ç”¨æ¸ˆã¿ãƒ•ãƒ©ã‚°
   â”œâ”€ ã‚¿ãƒ¼ãƒ³å‡¦ç†
   â””â”€ é€šçŸ¥è¡¨ç¤º
```

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### Reactæœ€é©åŒ–

```typescript
// ãƒ¡ãƒ¢åŒ–
const MemoizedCell = React.memo(Cell, (prev, next) => {
  return prev.state === next.state && prev.onClick === next.onClick;
});

// useMemo
const attackablePositions = useMemo(() => {
  return calculateAttackablePositions(gameState);
}, [gameState]);

// useCallback
const handleCellClick = useCallback((position) => {
  if (canAttack(position)) {
    attack(position);
  }
}, [canAttack, attack]);
```

### ãƒãƒ³ãƒ‰ãƒ«æœ€é©åŒ–

```javascript
// next.config.js
module.exports = {
  // ç”»åƒæœ€é©åŒ–
  images: {
    formats: ['image/avif', 'image/webp'],
  },

  // ã‚³ãƒ¼ãƒ‰åˆ†å‰²
  experimental: {
    optimizePackageImports: ['framer-motion'],
  },
};
```

### ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœ€é©åŒ–

- **ä»®æƒ³åŒ–**: å¤§é‡ã®ãƒªã‚¹ãƒˆã¯react-windowä½¿ç”¨
- **é…å»¶èª­ã¿è¾¼ã¿**: next/dynamicã§å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- **ç”»åƒæœ€é©åŒ–**: next/imageã§è‡ªå‹•æœ€é©åŒ–

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### XSSå¯¾ç­–
- Reactã®è‡ªå‹•ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
- dangerouslySetInnerHTMLã¯ä½¿ç”¨ã—ãªã„
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚º

### CSRFå¯¾ç­–
- P2Pé€šä¿¡ã®ãŸã‚ä¸è¦
- APIãŒã‚ã‚‹å ´åˆã¯ãƒˆãƒ¼ã‚¯ãƒ³å¿…é ˆ

### ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
```typescript
// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
function validateGameAction(action: GameAction): boolean {
  if (action.type === 'attack') {
    return isValidPosition(action.position);
  }
  return true;
}

// ã‚µãƒ¼ãƒãƒ¼å´ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆP2Pãªã—ï¼‰
// å°†æ¥çš„ã«ã‚²ãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼å®Ÿè£…æ™‚ã«å¿…è¦
```

### LocalStorage
```typescript
// XSSå¯¾ç­–
function sanitizeData(data: any): any {
  // HTMLã‚¿ã‚°å‰Šé™¤
  // ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¿ã‚°å‰Šé™¤
  return data;
}

// ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
function encryptData(data: any): string {
  return btoa(JSON.stringify(data));
}
```

---

## ä»Šå¾Œã®æ‹¡å¼µ

### ãƒ•ã‚§ãƒ¼ã‚º2: è¿½åŠ æ©Ÿèƒ½
- [ ] ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ©Ÿèƒ½ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å¿…è¦ï¼‰
- [ ] æˆ¦ç¸¾ã‚°ãƒ©ãƒ•è¡¨ç¤º
- [ ] ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‘ãƒƒã‚·ãƒ–èƒ½åŠ›
- [ ] ç§°å·ã®è¿½åŠ ï¼ˆ10ç¨®é¡ï¼‰
- [ ] ã‚¹ã‚­ãƒ³ã®è¿½åŠ ï¼ˆå„ã‚­ãƒ£ãƒ©3ç¨®é¡ï¼‰

### ãƒ•ã‚§ãƒ¼ã‚º3: ã‚²ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ æ‹¡å¼µ
- [ ] ä¹—ã‚Šç‰©ã®ç¨®é¡å¢—åŠ ï¼ˆ8-10ç¨®é¡ï¼‰
- [ ] è‡ªç”±ç·¨æˆã‚·ã‚¹ãƒ†ãƒ 
- [ ] æ–°ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¿½åŠ 
- [ ] ãƒœãƒ¼ãƒ‰ãƒ†ãƒ¼ãƒæ©Ÿèƒ½
- [ ] ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### ãƒ•ã‚§ãƒ¼ã‚º4: ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½
- [ ] ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆãƒ¢ãƒ¼ãƒ‰
- [ ] ãƒ•ãƒ¬ãƒ³ãƒ‰ã‚·ã‚¹ãƒ†ãƒ 
- [ ] ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½
- [ ] ãƒªãƒ—ãƒ¬ã‚¤æ©Ÿèƒ½
- [ ] æˆ¦ç¸¾å…±æœ‰æ©Ÿèƒ½

### æŠ€è¡“çš„æ”¹å–„
- [ ] WebSocketã«ã‚ˆã‚‹å®‰å®šã—ãŸé€šä¿¡
- [ ] ã‚²ãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼å®Ÿè£…ï¼ˆãƒãƒ¼ãƒˆå¯¾ç­–ï¼‰
- [ ] Progressive Web Appå¯¾å¿œ
- [ ] ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰
- [ ] ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ

---

## å‚è€ƒè³‡æ–™

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Next.js Documentation](https://nextjs.org/docs)
- [PeerJS Documentation](https://peerjs.com/docs/)
- [Framer Motion Documentation](https://www.framer.com/motion/)
- [Zustand Documentation](https://github.com/pmndrs/zustand)

### é–‹ç™ºãƒ„ãƒ¼ãƒ«
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [React DevTools](https://react.dev/learn/react-developer-tools)

---

**æœ€çµ‚æ›´æ–°**: 2025-11-06
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
